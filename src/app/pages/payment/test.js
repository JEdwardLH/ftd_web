window.KInlineCheckout=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Number="card-number",e.Name="card-name",e.Expiry="card-cvv",e.CVV="card-expiry",e.Remember="remember-card"}(r||(r={}));var a,i,c,d,u,l="https://dev-kpaymentgateway.kasikornbank.com",m={},s=document.querySelector('script[src^="'+l+'"]'),f={"card-name":{},"card-number":{},"card-cvv":{},"card-expiry":{},"remember-card":{}};function p(){o||(m={apikey:s.dataset.apikey,amount:s.dataset.amount,currency:s.dataset.currency,campaignId:s.dataset.campaignId,writeLog:"true"===s.dataset.writeLog},s.dataset.lang?m.lang=s.dataset.lang.toLowerCase():m.lang="th",y(),b(),o=!0)}function y(){g(r.Name),g(r.Number),g(r.Expiry),g(r.CVV),g(r.Remember)}function g(e){var t=document.createElement("iframe");t.src="https://dev-kpaymentgateway.kasikornbank.com/ui/v2/index.html#kinline/"+e,t.scrolling="no",t.width="100%",t.id="k-inline-"+e+"-iframe",t.name="k-inline-"+e+"-iframe",t.style.display="block",t.style.border="none",t.style.overflow="visible",t.style.backgroundColor="transparent",t.style.height="0";var n=document.getElementById(e);if(n){if(n.hasChildNodes()){console.log(n);var r=n.getElementsByTagName("iframe");r&&0!==r.length&&r[0].parentNode&&r[0].parentNode.removeChild(r[0])}n.appendChild(t)}else;}function b(){window.addEventListener("message",h,!1),s&&s.parentNode&&"FORM"===s.parentNode.nodeName&&s.parentNode.addEventListener("submit",(function(e){e.preventDefault(),u&&u(),function(){var e=document.getElementById("k-inline-"+r.Name+"-iframe");if(e){var t=document.getElementById(r.Remember),n=void 0!==t&&null!=t,o={type:"form-submit",element:r.Name,data:{configuration:m,isSaveCardExits:n}};e.contentWindow&&e.contentWindow.postMessage(o,"*")}}()}))}function v(e){return!!e||(console.error("Error: ApiKey is invalid."),!1)}function k(e){return!!["th","en"].includes(e.toLowerCase())||(console.error("Language must be 'th' or 'en'"),!1)}function h(e){if(function(e,t){return e.origin===t}(e,l)){var t=e.data;switch(t.type){case"request-client-setting":!function(e){var t={type:"request-client-setting",data:m},n=document.getElementById("k-inline-"+e.element+"-iframe");n&&n.contentWindow&&n.contentWindow.postMessage(t,"*")}(t);break;case"set-iframe-height":!function(e){document.getElementById("k-inline-"+e.element+"-iframe").style.height=e.data}(t);break;case"request-input-styles":w(t);break;case"validation":!function(e){var t=e.element,n=e.data;d&&d(t,n)}(t);break;case"submit-response":!function(e){var t=e.data,n=t.token,r=null!=t.saveCard&&t.saveCard;t&&("error"!==t?function(e,t){C("token",e),C("saveCard",t),s.parentNode&&"FORM"===s.parentNode.nodeName&&s.parentNode.submit()}(n,r):c&&c(t))}(t);break;case"get-token-response":t.data.isSuccess?a(t.data.result):i(t.data.result);break;case"error-response":!0===m.writeLog&&console.error(t.data.message),"function"==typeof c&&c(t.data.message)}}}function w(e){var t=e.element,n={type:"request-input-styles",element:""};switch(t){case r.Name:n.element=r.Name,n.data=f["card-name"]||{};break;case r.Number:n.element=r.Number,n.data=f["card-number"]||{};break;case r.Expiry:n.element=r.Expiry,n.data=f["card-expiry"]||{};break;case r.CVV:n.element=r.CVV,n.data=f["card-cvv"]||{};break;case r.Remember:n.element=r.Remember,n.data=f["remember-card"]||{}}var o=document.getElementById("k-inline-"+t+"-iframe");o&&o.contentWindow&&o.contentWindow.postMessage(n,"*")}function C(e,t){if(s.parentNode){var n=s.parentNode.querySelector('input[name="'+e+'"]');n?n.value=t:((n=document.createElement("input")).type="hidden",n.name=e,n.value=t,s.parentNode.appendChild(n))}}function N(e,t){var n,r,o=f[e];o?(t.fontFamily&&(o.fontFamily=t.fontFamily),t.fontSize&&(n=t.fontSize,(r=(new Option).style).fontSize=n,r.fontSize==n)&&(o.fontSize=t.fontSize),t.fontColor&&E(t.fontColor)&&(o.fontColor=t.fontColor),t.checkboxColor&&E(t.checkboxColor)&&(o.checkboxColor=t.checkboxColor),t.checkboxBorderColor&&E(t.checkboxBorderColor)&&(o.checkboxBorderColor=t.checkboxBorderColor),t.fontWeight&&(o.fontWeight=t.fontWeight),w({element:"card-name"}),w({element:"card-number"}),w({element:"card-expiry"}),w({element:"card-cvv"}),w({element:"remember-card"})):console.error("Custom style was not valid.")}function E(e){if(""===e)return!1;if("inherit"===e)return!1;if("transparent"===e)return!1;var t=document.createElement("img");return t.style.color="rgb(0, 0, 0)",t.style.color=e,"rgb(0, 0, 0)"!==t.style.color||(t.style.color="rgb(255, 255, 255)",t.style.color=e,"rgb(255, 255, 255)"!==t.style.color)}t.init=function(){return p()},t.configure=function(e){return function(e){e.apikey&&v(e.apikey)&&(m.apikey=e.apikey),e.lang&&k(e.lang)&&(m.lang=e.lang.toLowerCase()),e.writeLog&&("boolean"==typeof e.writeLog?m.writeLog=e.writeLog:m.writeLog="true"===e),e.campaignId&&(m.campaignId=e.campaignId),o||(y(),b(),o=!0)}(e)},t.setPublickey=function(e){v(e)&&(m.apikey=e)},t.setLang=function(e){k(e)&&(m.lang=e.toLowerCase())},t.setCampaignId=function(e){e&&(m.campaignId=e)},t.setWriteLog=function(e){m.writeLog="boolean"==typeof e?e:"true"===e},t.setFontStyle=function(e,t){N(e,t)},t.onFormSubmit=function(e){return u=e},t.onGetTokenFailed=function(e){return c=e},t.onInputValidation=function(e){return d=e},t.onClientError=function(e){return e},t.getToken=function(){return new Promise((function(e,t){a=e,i=t;var n=document.getElementById("k-inline-"+r.Name+"-iframe");if(n){var o=document.getElementById(r.Remember),c=void 0!==o&&null!=o,d={type:"form-submit",element:r.Name,data:{configuration:m,isSaveCardExits:c,isPromise:!0}};n.contentWindow&&n.contentWindow.postMessage(d,"*")}}))},document.onreadystatechange=function(){(window.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?p():document.addEventListener&&document.addEventListener("DOMContentLoaded",(function(){p()}))}}]);
